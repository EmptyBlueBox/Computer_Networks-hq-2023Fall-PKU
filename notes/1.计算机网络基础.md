# 1.计算机网络基础

## 网络的构成

### 网络边缘

主机Host

<img src="./sum.assets/CleanShot 2023-12-29 at 02.47.21@2x.png" alt="CleanShot 2023-12-29 at 02.47.21@2x" style="zoom:25%;" />

### 接入网：只需了解各类接入方式在物理介质上的区别，具体细节不考

通过各类物理介质将主机连接到边缘路由器上

> 存储常用字节：Byte
> K/M/G层级为2^10进制
>
> 传输常用比特bit
> K/M/G层级为10^3进制
>
> 1B=8b（注意大小写）

两种类型：

1. 引导型介质：信号在固体介质中传播，例如铜、光纤、同轴电缆——有限的空间，有限介质
2. 非引导型介质：信号自由传播，例如无线电（陆地无线电、卫星无线电信道）——在相对自由的空间中传播，无限介质

具体介质：

1. 双绞线

   • 两根绝缘铜线互相缠绕为一对
   • **<u>电话线</u>**为1对双绞线
   • **<u>网线</u>**为4对双绞线，广泛用于计算机网络（以太网）**<u>双向</u>**传输
   • 第五类: 100 Mbps~1 Gbps
   • 第6类：10Gbps

2. 同轴电缆

   • 两根同心铜导线，**<u>双向</u>**传输
   • 电缆上的多个频率通道
   • 带宽可达100Mbps

3. 光纤
   玻璃纤维携带光脉冲，每个脉冲一位
   高速运行：点对点传输（10-100 Gbps以上）
   低误码率：所以中继器可以相距很远，对电磁噪声免疫

4. 数字用户线DSL

   使用电话线连接到数字用户线接入复用器（DSLAM）：每户有独立线路
   现代DSL：语音和数据可以同时在电话线上传输——使用不同的频率区分语音和数据，数据进入互联网，语音连接到电话网
   更古老的拨号上网：无法支持语音与数据同时传输

5. 同轴电缆

   同轴电缆：Cable
   •家庭利用传统有线电视信号线（同轴电缆）接入头端上网——美国比较早，很早已经有DSL和同轴电缆了，因此可以再利用来上网
   •多个家庭共享有线电视的头端

   混合光纤同轴电缆HFC
   •先用同轴电缆接入光纤节点，再用光纤连接到头端
   •高达40 Mbps-1.2 Gbps下行传输速率，30-100Mbps上行传输速率

6. 光纤到户FTTH：带宽大、线路稳定
   • FTTH: Fiber To The Home
   •我国及全球先进地区普遍采用的光纤通信的传输方法
   分为两类：有源光纤网络AON和无源光纤网络PON
   •AON：每个用户独立线路，速度快，但成本高、能耗大
   •PON：用户共享线路，成本低、能耗低

7. 无线接入

   无线局域网（WLAN）

   广域蜂窝接入网

8. 实际的家庭网络

   <img src="./sum.assets/CleanShot 2023-12-29 at 12.06.31@2x.png" alt="CleanShot 2023-12-29 at 12.06.31@2x" style="zoom:25%;" />

9. 实际的企业网络

   直接通过交换机与专线直连接入到ISP（因特网）
   内部用一系列以太网交换机与WiFi建立内部网络

   <img src="./sum.assets/CleanShot 2023-12-29 at 12.14.45@2x.png" alt="CleanShot 2023-12-29 at 12.14.45@2x" style="zoom:25%;" />

### 网络核心：分组交换、电路交换、转发与路由、存储转发、排队与丢包、Internet架构

分组交换：将大消息(message)拆分成多个小分组(packet)，以分组作为数据传输单元，使用存储-转发机制，实现数据交互的通信方式

统计多路复用 （statistical multiplexing）：主机A和B的报文分组按需共享带宽

"存储与转发"传输：路由器需要接收到完整的整个数据包后，才能开始向下一跳发送，但是会带来额外的报文的传输延迟，每多一个路由器，就多 L/R 秒

排队与丢包：分组在一个缓冲区中排队，等到链路可用；若队列被填满，后续分组就被丢弃





电路交换：先呼叫**<u>建立连接</u>**，进行**<u>资源预留</u>**，包括链路带宽资源和交换机的交换能力；物理通路被双方独占，即使空闲也不共享，传输**<u>性能好</u>**；但如果设备故障，则传输中断。**<u>无法应对突发流量，无法灵活复用</u>**。（4点区别）

电路交换的多路复用：频分多路复用FDM，时分多路复用TDM，在每一路上实现具有和专用链路类似的性能，该路资源专用，即使空闲也不与其他连接共享



具体解释分组交换和电路交换的区别：

**<u>分组交换支持更多的用户：</u>**

举个例子：

1 Mbps link，每个用户传输数据时占用100 kb/s带宽，10%的时间在传输数据


电路交换：最多支持10个用户

分组交换：对于35个用户，大于10个用户同时传输数据的概率小于 0.0004，因此可以基本支持35个用户同时发送；计算方法：二项分布

**<u>分组交换适合有大量突发数据：</u>**

但是：
缺点1：分组交换容易拥塞，引起排队延迟甚至丢包，所以需要设计可靠性机制与拥塞控制机制
缺点2：分组交换无法提供类似电路交换的服务，对于语音、视频、游戏等服务需要带宽保障的可以采用折中方法：虚电路，是网络版本的虚拟机，在网络中模拟另一个网络

虚电路：

•用分组模拟电路交换行为
•自身开销大，性能难以保证（与正常的分组交换数据竞争带宽）



Internet架构：

<img src="./sum.assets/CleanShot 2023-12-29 at 18.20.17@2x.png" alt="CleanShot 2023-12-29 at 18.20.17@2x" style="zoom:25%;" />

<img src="./sum.assets/CleanShot 2023-12-29 at 18.20.48@2x.png" alt="CleanShot 2023-12-29 at 18.20.48@2x" style="zoom:25%;" />

<img src="./sum.assets/CleanShot 2023-12-29 at 18.21.04@2x.png" alt="CleanShot 2023-12-29 at 18.21.04@2x" style="zoom:25%;" />

甚至有些公司（Akamai）专门提供CDN服务：与ISP服务不同，只有To B业务

<img src="./sum.assets/CleanShot 2023-12-29 at 18.21.46@2x.png" alt="CleanShot 2023-12-29 at 18.21.46@2x" style="zoom:25%;" />

## 网络服务

### 面向连接 VS 无连接

面向连接：每个“请求”或“响应”后，都在对方产生一个“指示”或“确认”动作，类比电话系统上邀请姑姑来喝茶

无连接：传输过程不需要应答，类比邮政系统送快递

### 性能指标

1. 带宽：信道最大输出量
   网络中某通道传送数据的能力，即单位时间内网络中的某信道所能通过的“最高数据率”
   单位是 bits，即“比特每秒”，也可以写为bps （bit persecond), 或 kbit/s. Mbit/s. Gbit/s

2. 包转发率（PPS）
   全称是Packet Per Second（包/秒），表示交换机或路由器等网络设备以包为单位的转发速率
   线速转发：交换机端口在满负载的情况下，对帧进行转发时能够达到该端口线路的最高速度

   在交换机上：大包和小包，哪个更容易实现线速？大包更容易实现线速。CPU以包作为单位处理，考虑对路由器CPU的压力：64B，10Gbps，1秒钟1488w个数据包，对CPU压力大；1500B，10Gbps，CPU压力小。CPU处理速度逐渐跟不上网络的提升速度。

3. 比特率（bit rate）：主机实际输出量
   单位时间内，主机往数字信道上传输数据的数据量，也称数据率或传输速率，单位是b/s
   前面接入网里介绍的传输速率，指的都是比特率

4. 吞吐量（throughput）：信道实际输出量
   单位时间内，通过某个网络位置（或信道、接口）的数据量，单位是b/s

5. 有效吞吐量（goodput）：信道实际接收量，如果光缆中间没坏，那就是吞吐量
   单位时间内，目的地正确接收到的有用信息的数目，单位b/s

6. 利用率 = 吞吐量/带宽
   信道利用率指出某信道有百分之几的时间是被利用的
   网络利用率则是全网络的信道利用率的加权平均值

   <img src="./sum.assets/CleanShot 2023-12-29 at 18.50.46@2x.png" alt="CleanShot 2023-12-29 at 18.50.46@2x" style="zoom:25%;" />

7. 丟包率
   所丟失数据包的数量占所发送数据包的比率

8. 时延 = 传输时延（发送时延，注入时延）＋传播时延＋处理时延＋排队时延（输入输出排队需要的时间）

   排队时延是最不确定因素，其他3类时延都能相对容易计算

9. 往返时延RTT（Round-Trip Time）：使用ping命令获取
   从发送方发送数据开始，到发送方收到来自接收方的确认，经历的总时间
   可用于判断网络的通断性、测试网络时延、计算数据包丢失率等

10. 时延带宽积

    时延带宽积 =传播时延×带宽，即按比特计数的链路长度

    链路像一条空心管道，只有在代表链路的管道都充满比特时，链路才得到了充分利用

11. 时延抖动

    变化的时延称为抖动（Jitter）

    时延抖动起源于网络中的队列或缓冲，抖动难以精确预测，在语音、视频多媒体业务中，抖动往往会严重影响用户的体验

12. 延迟丢包
    在多媒体应用中，由于数据包延迟到达，在接收端需要丢弃失去使用价值的包

13. 可靠性：发送的每个消息，接收方收到一次且仅收到一次

14. 完整性：发送的数据无法被篡改

15. 隐私性：发送的数据不被第三方截获，有时也包含发送方身份不被暴露

16. 可审计性 （accountability）：可追溯用户的传输行为



## 网络协议基本概念

网络协议：为进行网络中的数据交换而建立的规则、标准或约定，即网络协议（network protocol）
发送方：发送某个消息时，应满足特定条件
接收方：收到某个消息后，要完成特定的工作

网络协议三要素：

语法：规定传输数据的格式（如何讲）
语义：规定所要完成的功能（讲什么）
时序：规定各种操作的顺序（双方讲话的顺序）

## 分层模型

<img src="./sum.assets/CleanShot 2023-12-29 at 19.10.39@2x.png" alt="CleanShot 2023-12-29 at 19.10.39@2x" style="zoom:33%;" />

## 各层实现位置

<img src="./sum.assets/CleanShot 2023-12-29 at 19.16.16@2x.png" alt="CleanShot 2023-12-29 at 19.16.16@2x" style="zoom:33%;" />